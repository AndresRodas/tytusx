<!DOCTYPE html>
<html>

<head>
    <title>TYTUSX</title>
    <!--<link rel="stylesheet" type="text/css" href="./estilos.css">-->
    <link rel="shortcut icon" href="./favicon.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/b7c4564f91.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
    <link href="./vis.css" rel="stylesheet" type="text/css" >
        <script type="text/javascript" src="./vis.js"></script>
        <style type="text/css">
            #xml_asc_cst, #xml_desc_cst, #xpath_asc_cst, #xpath_desc_cst, #xpath_asc_ast, #xpath_desc_ast {
                width: 600px;
                height: 650px;
                border: 1px solid lightgray;
            }
            body{background: rgb(3, 46, 63);font-family: sans-serif;} .txt1{left: 200px;top: 200px;position: absolute;} .txt2{left: 865px;top: 200px;position: absolute;}
            .txt3{left: 200px;top: 150px;position: absolute;} .hh1{left: 200px;top: 110px;position: absolute;}.hh2{left: 530px;top: 110px;position: absolute;}.hh3{left: 565px;top: 110px;position: absolute;}
            .hh4{left: 600px;top: 110px;position: absolute}.hh5{left: 625px;top: 110px;position: absolute}.hh6{left: 655px;top: 110px;position: absolute}.hh7{left: 720px;top: 110px;position: absolute}
            .hh8{left: 785px;top: 110px;position: absolute}.hh9{left: 850px;top: 110px;position: absolute}.hh0{left: 915px;top: 110px;position: absolute}.hhh1{left: 980px;top: 110px;position: absolute} 
            .hhh2{left: 1045px;top: 110px;position: absolute} .hhh3{left: 1110px;top: 110px;position: absolute}.boton{width: 30px;height: 30px;cursor: pointer;}.botoncito{width: 60px;height: 30px;cursor: pointer;}.titulo{left: 850px;top: 40px;font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;font-size: xx-large;color: rgb(82, 196, 241);position: absolute;}
            .label{font-family: Arial, Helvetica, sans-serif;font-size: smaller;color: rgb(82, 196, 241);}
        </style>
</head>

<body>
  <div>
    <h1 class="titulo">TYTUSX</h1>
    <div class="hh1">
      <button class="fas fa-folder-open" type="file" value="text">
        <input type="file" id="file" value="text" />
      </button>
    </div>

    <div class="hh2"><!--BOTON GUARDAR-->
      <button class="boton" onclick="Guardar()">
        <i class="fas fa-save"></i>
      </button>
    </div>

    <div class="hh3"><!--BOTON LIMPIAR-->
      <button class="boton" onclick="Limpiar()">
        <i class="far fa-file"></i>
      </button>
    </div>

    <div class="hh4"><!--BOTON ERRORES-->
        <button type="button" data-bs-toggle="modal" data-bs-target="#erroresModal">
            <i class="fas fa-exclamation"></i>
          </button>
     </div>

    <div class="hh5"><!--BOTON REPORTES-->
        <button type="button" data-bs-toggle="modal" data-bs-target="#exampleModalToggle">
          <i class="fas fa-file-pdf"></i>
        </button>
      </div>

    <div class="hh6"><!--BOTON COMPILAR DESCENDENTE-->
      <button class="botoncito" onclick="analisis_desc()">
        <i class="fas fa-play"></i>
        <i class="fas fa-arrow-down"></i>
      </button>
    </div>

    <div class="hh7"><!--BOTON COMPILAR ASCENDENTE-->
      <button class="botoncito" onclick="analisis_asc()">
        <i class="fas fa-play"></i>
        <i class="fas fa-arrow-up"></i>
      </button>
    </div>

      <div class="hh8"><!--BOTON COMPILAR DESCENDENTE-->
        <button class="botoncito" onclick="analisis_desc_xpath()">
            <i class="fas fa-cogs"></i>
            <i class="fas fa-arrow-down"></i>
        </button>
      </div>      

    <div class="hh9"><!--BOTON COMPILAR ASCENDENTE-->
        <button class="botoncito" onclick="analisis_asc_xpath()">
            <i class="fas fa-cogs"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
    </div>
      
      
    <div class="hh0"><!--BOTON AST DESCENDENTE-->
        <button class="botoncito" data-bs-toggle="modal" data-bs-target="#astModalDes">
            <i class="fas fa-code-branch"></i>
              <i class="fas fa-arrow-down"></i>
          </button>
      </div>      

      <div class="hhh1"><!--BOTON AST ASCENDENTE-->
        <button class="botoncito" data-bs-toggle="modal" data-bs-target="#astModalAsc">
            <i class="fas fa-code-branch"></i>
              <i class="fas fa-arrow-up"></i>
          </button>
      </div>      

      <div class="hhh2"><!--BOTON CST DESCENDENTE-->
          <button class="botoncito" data-bs-toggle="modal" data-bs-target="#cstModalDes">
              <i class="fas fa-tree"></i>
              <i class="fas fa-arrow-down"></i>
          </button>
      </div>      

      <div class="hhh3"><!--BOTON CST ASCENDNETE-->
          <button class="botoncito" data-bs-toggle="modal" data-bs-target="#cstModal">
              <i class="fas fa-tree"></i>
              <i class="fas fa-arrow-up"></i>
          </button>
      </div>

    <textarea class="txt1" name="texto" id="txtxml" style="width:650px;height:700px"><!--INGRESE SU ARCHIVO EN FORMATO XML--></textarea>
    <textarea class="txt2" name="texto" id="txtconsola" style="width:650px;height:700px">--RESULTADOS--</textarea>
    <textarea class="txt3" name="texto" id="txtxpath" style="width:1320px;height:30px">INGRESE SU CONSULTA EN FORMATO XPATH</textarea>
  </div>

  <div class="modal fade" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
    tabindex="-1">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalToggleLabel">REPORTE GRAMATICAL</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="container-fluid">
            <div class="row">
              <div class="col-sm-14">
                <center>
                  <h4>ASCENDENTE</h4>
                </center>
                <div class="row">
                  <div class="col-sm-6 ms-auto">
                    <h6>XML</h6>
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">PRODUCCION</th>
                          <th scope="col">REGLA SEMANTICA</th>
                        </tr>
                      </thead>
                      <tbody id="gram_asc">
                      </tbody>
                    </table>
                  </div>
                  <div class="col-sm-6 ms-auto">
                    <h6>XPATH</h6>
                    <div id= "tabla_ascendente"></div>
                  </div>
                </div>
              </div>

            </div>
            <div class="row">
              <div class="col-sm-14">
                <center>
                  <h4>DESCENDENTE</h4>
                </center>
                <div class="row">
                  <div class="col-sm-6 ms-auto">
                    <h6>XML</h6>
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">PRODUCCION</th>
                          <th scope="col">REGLA SEMANTICA</th>
                        </tr>
                      </thead>
                      <tbody id="gram_desc">
                      </tbody>
                    </table>
                  </div>
                  <div class="col-sm-6 ms-auto">
                    <h6>XPATH</h6>
                    <div id= "tabla_descendente"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="erroresModal" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="erroresModalLabel">ERRORES</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="container-fluid">
            <div class="row">
              <div class="col-sm-14">
                <div class="row">
                  <div class="col-sm-6 ms-auto">
                    <h6>XML</h6>
                    <table class="table">
                      <thead>
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">TIPO</th>
                          <th scope="col">DESCRIPCION</th>
                          <th scope="col">LINEA</th>
                          <th scope="col">COLUMNA</th>
                        </tr>
                      </thead>
                      <tbody id="gram_asc_error">
                      </tbody>
                    </table>
                  </div>
                  <div class="col-sm-6 ms-auto">
                    <h6>XPATH</h6>
                    <div id= "Tabla_Errores"></div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<div class="modal fade" id="cstModal" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="cstModalLabel">ARBOL CST ASCENDENTE</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <div class="container-fluid">
                  <div class="row">
                  <div class="col-sm-14">
                      <div class="row">
                          <div class="col-sm-6 ms-auto">
                              <h6>XML</h6>
                              <div id="xml_asc_cst"></div>
                            </div>
                            <div class="col-sm-6 ms-auto">
                              <h6>XPATH</h6>
                              <div id="xpath_asc_cst"></div>
                            </div>
                      </div>
                  </div>
                  </div>
              </div>
          </div>
        </div>
      </div>
  </div>

  <div class="modal fade" id="cstModalDes" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
      <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="cstModalLabel">ARBOL CST DESCENDENTE</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <div class="container-fluid">
                  <div class="row">
                  <div class="col-sm-14">
                      <div class="row">
                          <div class="col-sm-6 ms-auto">
                              <h6>XML</h6>
                              <div id="xml_desc_cst"></div>
                            </div>
                            <div class="col-sm-6 ms-auto">
                              <h6>XPATH</h6>
                              <div id="xpath_desc_cst"></div>
                            </div>
                      </div>
                  </div>
                  </div>
              </div>
          </div>
        </div>
      </div>
  </div>
    
<div class="modal fade" id="astModalDes" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="cstModalLabel">ARBOL AST DESCENDENTE</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <center>
                <h6>XPATH</h6>
                <div id="xpath_desc_ast"></div>
            </center>
        </div>
      </div>
    </div>
</div>
    
 <div class="modal fade" id="astModalAsc" aria-hidden="true" aria-labelledby="exampleModalToggleLabel" tabindex="-1">
    <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="cstModalLabel">ARBOL AST ASCENDENTE</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <center>
                <h6>XPATH</h6>
                <div id="xpath_asc_ast"></div>
            </center>
            
        </div>
      </div>
    </div>
</div>
    
    
    
  <script type="text/javascript">
    const input = document.getElementById('file');
    const editor = document.getElementById('txtxml');
    const editor1 = document.getElementById('txtxpath');
    input.addEventListener('change', function () {
      if (input.files.length > 0) {
        readFile(input.files[0]);
      }
    });
    function readFile(file) {
      const reader = new FileReader();
      reader.onload = function () {
        if (editor.value === "<!--INGRESE SU ARCHIVO EN FORMATO XML-->") {
          editor.value = reader.result;
        } else {
          editor1.value = reader.result;
        }

      }
      reader.readAsText(file);
    }
  </script>
  
  <script>
    function Guardar() {
      var textToWrite = document.getElementById("txtxml").value;
      var textFileAsBlob = new Blob([textToWrite], { type: 'text/java' });
      var fileNameToSaveAs = "Entrada.java";
      var downloadLink = document.createElement("a");
      downloadLink.download = fileNameToSaveAs;
      downloadLink.innerHTML = "My Hidden Link";
      window.URL = window.URL || window.webkitURL;
      downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
      downloadLink.onclick = Eliminar;
      downloadLink.style.display = "none";
      document.body.appendChild(downloadLink);
      downloadLink.click();
    }

    function Eliminar(event) {
      // remove the link from the DOM
      document.body.removeChild(event.target);
    }

  </script>

  <script>
    function Limpiar() {
      document.getElementById("txtxml").value = "";
      document.getElementById("txtxml").value = "<!--INGRESE SU ARCHIVO EN FORMATO XML-->";
      document.getElementById("txtxpath").value = "";
      document.getElementById("txtxpath").value = "INGRESE SU CONSULTA EN FORMATO XPATH";
      document.getElementById("txtconsola").value = "";
      document.getElementById("txtconsola").value = "--RESULTADOS--";
    }
  </script>

  <script>
    function traducir() {
      var txt = document.getElementById("txtxml").value;
      var txtra = utf8_decode(txt);
      document.getElementById("txtxpath").value = txtra;
    }
  </script>

  <script type="text/javascript">
    function utf8_decode(strData) { // eslint-disable-line camelcase 
      const tmpArr = []
      let i = 0
      let c1 = 0
      let seqlen = 0
      strData += ''
      while (i < strData.length) {
        c1 = strData.charCodeAt(i) & 0xFF
        seqlen = 0
        if (c1 <= 0xBF) {
          c1 = (c1 & 0x7F)
          seqlen = 1
        } else if (c1 <= 0xDF) {
          c1 = (c1 & 0x1F)
          seqlen = 2
        } else if (c1 <= 0xEF) {
          c1 = (c1 & 0x0F)
          seqlen = 3
        } else {
          c1 = (c1 & 0x07)
          seqlen = 4
        }
        for (let ai = 1; ai < seqlen; ++ai) {
          c1 = ((c1 << 0x06) | (strData.charCodeAt(ai + i) & 0x3F))
        }
        if (seqlen === 4) {
          c1 -= 0x10000
          tmpArr.push(String.fromCharCode(0xD800 | ((c1 >> 10) & 0x3FF)))
          tmpArr.push(String.fromCharCode(0xDC00 | (c1 & 0x3FF)))
        } else {
          tmpArr.push(String.fromCharCode(c1))
        }
        i += seqlen
      }
      return tmpArr.join('')
    }
  </script>

  <!-- ACCIONES DE EJECUCION -->
  <script type="text/javascript" src="./acciones.js"></script>

  <!-- GRAMATICA XML -->
  <script>var exports = { "__esModule": true };</script>
  <script type="text/javascript" src="./acciones.js"></script>
  <script type="text/javascript" src="./BACK/xml/Gramatica/gramar.js"></script>
  <script type="text/javascript" src="./BACK/xml/Gramatica/gramar_des.js"></script>
  <script type="text/javascript" src="./BACK/xml/Gramatica/gramar_cy.js"></script>
  <script type="text/javascript" src="./BACK/xml/Gramatica/gramar_des_cy.js"></script>
  <script type="text/javascript" src="./BACK/xml/Gramatica/tabla_error.js"></script>
  <script type="text/javascript" src="./BACK/xml/Gramatica/nodo_error.js"></script>
  <script type="text/javascript" src="./BACK/xml/Gramatica/nodo_tree.js"></script>
  <script type="text/javascript" src="./BACK/xml/Gramatica/tree_roud.js"></script>
  <script type="text/javascript" src="./BACK/xml/scripts/js/Atributo.js"></script>
  <script type="text/javascript" src="./BACK/xml/scripts/js/Elemento.js"></script>
  <script type="text/javascript" src="./BACK/xml/scripts/js/Entorno.js"></script>
  <script type="text/javascript" src="./BACK/xml/scripts/js/Simbolo.js"></script>
  <script type="text/javascript" src="./BACK/xml/scripts/js/Tipo.js"></script>

  <script type="text/javascript" src="./BACK/xpath/INSTRUCCIONES/Resultado.js"></script>
  <script type="text/javascript" src="./BACK/xpath/INSTRUCCIONES/Conca.js"></script>
  <script type="text/javascript" src="./BACK/xpath/EXPRESIONES/Dato.js"></script>
  <script type="text/javascript" src="./BACK/xpath/EXPRESIONES/Operacion.js"></script>
  <script type="text/javascript" src="./BACK/xpath/EXPRESIONES/Objeto.js"></script>
  <script type="text/javascript" src="./BACK/xpath/EXPRESIONES/Identificador.js"></script>
  <script type="text/javascript" src="./BACK/xpath/EXPRESIONES/AtributoXpath.js"></script>
  <script type="text/javascript" src="./BACK/xpath/EXPRESIONES/L_Atributo.js"></script>
  <script type="text/javascript" src="./BACK/xpath/EXPRESIONES/PR.js"></script>
  <script type="text/javascript" src="./BACK/xpath/EXPRESIONES/PAL_RE.js"></script>
  <script type="text/javascript" src="./BACK/xpath/EXPRESIONES/Atri.js"></script>

  <script type="text/javascript" src="./BACK/xpath/REPORTES/ReporteGA.js"></script>
  <script type="text/javascript" src="./BACK/xpath/REPORTES/ReporteGD.js"></script>
  <script type="text/javascript" src="./BACK/xpath/REPORTES/NodoReporte.js"></script>

  <script type="text/javascript" src="./BACK/xpath/Errores/Error.js"></script>
  <script type="text/javascript" src="./BACK/xpath/Errores/NodoError.js"></script>

  <script type="text/javascript" src="./BACK/xpath/AST/AST.js"></script>
  <script type="text/javascript" src="./BACK/xpath/AST/SimboloXpath.js"></script>
  <script type="text/javascript" src="./BACK/xpath/AST/TipoXpath.js"></script>
  <script type="text/javascript" src="./BACK/xpath/AST/EntornoXpath.js"></script>

  <script type="text/javascript" src="./BACK/xpath/CONSULTAS/Consulta.js"></script>
  <script type="text/javascript" src="./BACK/xpath/CONSULTAS/NodoConsulta.js"></script>

  <script type="text/javascript" src="./BACK/xpath/INTERFACES/Instruccion.js"></script>
  <script type="text/javascript" src="./BACK/xpath/INTERFACES/Expresion.js"></script>


  <script type="text/javascript" src="./BACK/xpath/GRAMATICA/Gramatica1.js"></script>
  <script type="text/javascript" src="./BACK/xpath/GRAMATICA/Gramatica1A.js"></script>
  <script type="text/javascript" src="./BACK/xpath/GRAMATICA/Gramatica1C.js"></script>
  <script type="text/javascript" src="./BACK/xpath/GRAMATICA/Gramatica2.js"></script>
  <script type="text/javascript" src="./BACK/xpath/GRAMATICA/Gramatica2A.js"></script>
  <script type="text/javascript" src="./BACK/xpath/GRAMATICA/Gramatica2C.js"></script>



</body>

</html>
